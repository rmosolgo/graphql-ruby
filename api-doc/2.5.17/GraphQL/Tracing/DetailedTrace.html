<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: GraphQL::Tracing::DetailedTrace
  
    &mdash; GraphQL Ruby API Documentation
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "GraphQL::Tracing::DetailedTrace";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (D)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../GraphQL.html" title="GraphQL (module)">GraphQL</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Tracing.html" title="GraphQL::Tracing (module)">Tracing</a></span></span>
     &raquo; 
    <span class="title">DetailedTrace</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: GraphQL::Tracing::DetailedTrace
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">GraphQL::Tracing::DetailedTrace</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/graphql/tracing/detailed_trace.rb<span class="defines">,<br />
  lib/graphql/tracing/detailed_trace/redis_backend.rb,<br /> lib/graphql/tracing/detailed_trace/memory_backend.rb</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p><code>DetailedTrace</code> can make detailed profiles for a subset of production traffic.</p>

<p>When <code>MySchema.detailed_trace?(query)</code> returns <code>true</code>, a profiler-specific <code>trace_mode: ...</code> will be used for the query,
overriding the one in <code>context[:trace_mode]</code>.</p>

<p>By default, the detailed tracer calls <code>.inspect</code> on application objects returned from fields. You can customize
this behavior by extending <span class='object_link'><a href="" title="GraphQL::Tracing::DetailedTrace (class)">DetailedTrace</a></span> and overriding <span class='object_link'><a href="#inspect_object-instance_method" title="GraphQL::Tracing::DetailedTrace#inspect_object (method)">#inspect_object</a></span>. You can opt out of debug annotations
entirely with <code>use ..., debug: false</code> or for a single query with <code>context: { detailed_trace_debug: false }</code>.</p>

<p><strong>Redis</strong>: The sampler stores its results in a provided Redis database. Depending on your needs,
You can configure this database to retain all data (persistent) or to expire data according to your rules.
If you need to save traces indefinitely, you can download them from Perfetto after opening them there.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
        <h5 class="example_title"><div class='inline'><p>Adding the sampler to your schema</p>
</div></h5>
      
      <pre class="example code"><code>class MySchema &lt; GraphQL::Schema
  # Add the sampler:
  use GraphQL::Tracing::DetailedTrace, redis: Redis.new(...), limit: 100

  # And implement this hook to tell it when to take a sample:
  def self.detailed_trace?(query)
    # Could use `query.context`, `query.selected_operation_name`, `query.query_string` here
    # Could call out to Flipper, etc
    rand &lt;= 0.000_1 # one in ten thousand
  end
end</code></pre>
    
      
        <h5 class="example_title"><div class='inline'><p>Customizing debug output in traces</p>
</div></h5>
      
      <pre class="example code"><code><span class='kw'>class</span> <span class='const'>CustomDetailedTrace</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../../GraphQL.html" title="GraphQL (module)">GraphQL</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Tracing.html" title="GraphQL::Tracing (module)">Tracing</a></span></span><span class='op'>::</span><span class='const'>DetailedTrace</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_inspect_object'>inspect_object</span><span class='lparen'>(</span><span class='id identifier rubyid_object'>object</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_object'>object</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>SomeThing</span><span class='rparen'>)</span>
      <span class='comment'># handle it specially ...
</span>    <span class='kw'>else</span>
      <span class='kw'>super</span>
     <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'><p>disabling debug annotations completely</p>
</div></h5>
      
      <pre class="example code"><code>use DetailedTrace, debug: false, ...</code></pre>
    
      
        <h5 class="example_title"><div class='inline'><p>disabling debug annotations for one query</p>
</div></h5>
      
      <pre class="example code"><code><span class='const'>MySchema</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='id identifier rubyid_query_str'>query_str</span><span class='comma'>,</span> <span class='label'>context:</span> <span class='lbrace'>{</span> <span class='label'>detailed_trace_debug:</span> <span class='kw'>false</span> <span class='rbrace'>}</span><span class='rparen'>)</span></code></pre>
    
  </div>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="../../Graphql/Dashboard.html" title="Graphql::Dashboard (class)">GraphQL::Dashboard for viewing stored results</a></span></li>
    
  </ul>

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="DetailedTrace/MemoryBackend.html" title="GraphQL::Tracing::DetailedTrace::MemoryBackend (class)">MemoryBackend</a></span>, <span class='object_link'><a href="DetailedTrace/RedisBackend.html" title="GraphQL::Tracing::DetailedTrace::RedisBackend (class)">RedisBackend</a></span>, <span class='object_link'><a href="DetailedTrace/StoredTrace.html" title="GraphQL::Tracing::DetailedTrace::StoredTrace (class)">StoredTrace</a></span>
    
  
</p>




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#trace_mode-instance_method" title="#trace_mode (instance method)">#<strong>trace_mode</strong>  &#x21d2; Symbol </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The trace mode to use when <span class='object_link'><a href="../Schema.html#detailed_trace%3F-class_method" title="GraphQL::Schema.detailed_trace? (method)">Schema.detailed_trace?</a></span> returns <code>true</code>.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#debug%3F-class_method" title="debug? (class method)">.<strong>debug?</strong>  &#x21d2; true </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Default debug setting.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect_object-class_method" title="inspect_object (class method)">.<strong>inspect_object</strong>(object)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#use-class_method" title="use (class method)">.<strong>use</strong>(schema, trace_mode: :profile_sample, memory: false, debug: debug?, , redis: nil, limit: nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#debug%3F-instance_method" title="#debug? (instance method)">#<strong>debug?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_all_traces-instance_method" title="#delete_all_traces (instance method)">#<strong>delete_all_traces</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_trace-instance_method" title="#delete_trace (instance method)">#<strong>delete_trace</strong>(id)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_trace-instance_method" title="#find_trace (instance method)">#<strong>find_trace</strong>(id)  &#x21d2; StoredTrace<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(storage:, trace_mode:, debug:)  &#x21d2; DetailedTrace </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A new instance of DetailedTrace.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect_object-instance_method" title="#inspect_object (instance method)">#<strong>inspect_object</strong>(object)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#save_trace-instance_method" title="#save_trace (instance method)">#<strong>save_trace</strong>(operation_name, duration_ms, begin_ms, trace_data)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>ID of saved trace.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#traces-instance_method" title="#traces (instance method)">#<strong>traces</strong>(last: nil, before: nil)  &#x21d2; Enumerable&lt;StoredTrace&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(storage:, trace_mode:, debug:)  &#x21d2; <tt><span class='object_link'><a href="" title="GraphQL::Tracing::DetailedTrace (class)">DetailedTrace</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a new instance of DetailedTrace.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


69
70
71
72
73</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/graphql/tracing/detailed_trace.rb', line 69</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='label'>storage:</span><span class='comma'>,</span> <span class='label'>trace_mode:</span><span class='comma'>,</span> <span class='label'>debug:</span><span class='rparen'>)</span>
  <span class='ivar'>@storage</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span>
  <span class='ivar'>@trace_mode</span> <span class='op'>=</span> <span class='id identifier rubyid_trace_mode'>trace_mode</span>
  <span class='ivar'>@debug</span> <span class='op'>=</span> <span class='id identifier rubyid_debug'>debug</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="trace_mode-instance_method">
  
    #<strong>trace_mode</strong>  &#x21d2; <tt>Symbol</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns The trace mode to use when <span class='object_link'><a href="../Schema.html#detailed_trace%3F-class_method" title="GraphQL::Schema.detailed_trace? (method)">Schema.detailed_trace?</a></span> returns <code>true</code>.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The trace mode to use when <span class='object_link'><a href="../Schema.html#detailed_trace%3F-class_method" title="GraphQL::Schema.detailed_trace? (method)">Schema.detailed_trace?</a></span> returns <code>true</code></p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


76
77
78</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/graphql/tracing/detailed_trace.rb', line 76</span>

<span class='kw'>def</span> <span class='id identifier rubyid_trace_mode'>trace_mode</span>
  <span class='ivar'>@trace_mode</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="debug?-class_method">
  
    .<strong>debug?</strong>  &#x21d2; <tt>true</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Default debug setting</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>true</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


124
125
126</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/graphql/tracing/detailed_trace.rb', line 124</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_debug?'>debug?</span>
  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="inspect_object-class_method">
  
    .<strong>inspect_object</strong>(object)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


114
115
116
117
118
119
120</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/graphql/tracing/detailed_trace.rb', line 114</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_inspect_object'>inspect_object</span><span class='lparen'>(</span><span class='id identifier rubyid_object'>object</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Relation</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_object'>object</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Relation</span><span class='rparen'>)</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_object'>object</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>, .to_sql=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_object'>object</span><span class='period'>.</span><span class='id identifier rubyid_to_sql'>to_sql</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_object'>object</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="use-class_method">
  
    .<strong>use</strong>(schema, trace_mode: :profile_sample, memory: false, debug: debug?, , redis: nil, limit: nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>redis</span>
      
      
        <span class='type'>(<tt>Redis</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>If provided, profiles will be stored in Redis for later review</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>limit</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>A maximum number of profiles to store</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>debug</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>debug?, </tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>if <code>false</code>, it wonâ€™t create <code>debug</code> annotations in Perfetto traces (reduces overhead)</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


56
57
58
59
60
61
62
63
64
65
66
67</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/graphql/tracing/detailed_trace.rb', line 56</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_use'>use</span><span class='lparen'>(</span><span class='id identifier rubyid_schema'>schema</span><span class='comma'>,</span> <span class='label'>trace_mode:</span> <span class='symbol'>:profile_sample</span><span class='comma'>,</span> <span class='label'>memory:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>debug:</span> <span class='id identifier rubyid_debug?'>debug?</span><span class='comma'>,</span> <span class='label'>redis:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>limit:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_redis'>redis</span>
    <span class='const'><span class='object_link'><a href="DetailedTrace/RedisBackend.html" title="GraphQL::Tracing::DetailedTrace::RedisBackend (class)">RedisBackend</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="DetailedTrace/RedisBackend.html#initialize-instance_method" title="GraphQL::Tracing::DetailedTrace::RedisBackend#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='label'>redis:</span> <span class='id identifier rubyid_redis'>redis</span><span class='comma'>,</span> <span class='label'>limit:</span> <span class='id identifier rubyid_limit'>limit</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_memory'>memory</span>
    <span class='const'><span class='object_link'><a href="DetailedTrace/MemoryBackend.html" title="GraphQL::Tracing::DetailedTrace::MemoryBackend (class)">MemoryBackend</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="DetailedTrace/MemoryBackend.html#initialize-instance_method" title="GraphQL::Tracing::DetailedTrace::MemoryBackend#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='label'>limit:</span> <span class='id identifier rubyid_limit'>limit</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Pass `redis: ...` to store traces in Redis for later review</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_detailed_trace'>detailed_trace</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>storage:</span> <span class='id identifier rubyid_storage'>storage</span><span class='comma'>,</span> <span class='label'>trace_mode:</span> <span class='id identifier rubyid_trace_mode'>trace_mode</span><span class='comma'>,</span> <span class='label'>debug:</span> <span class='id identifier rubyid_debug'>debug</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_detailed_trace'>detailed_trace</span> <span class='op'>=</span> <span class='id identifier rubyid_detailed_trace'>detailed_trace</span>
  <span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_trace_with'>trace_with</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="PerfettoTrace.html" title="GraphQL::Tracing::PerfettoTrace (module)">PerfettoTrace</a></span></span><span class='comma'>,</span> <span class='label'>mode:</span> <span class='id identifier rubyid_trace_mode'>trace_mode</span><span class='comma'>,</span> <span class='label'>save_profile:</span> <span class='kw'>true</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="debug?-instance_method">
  
    #<strong>debug?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


84
85
86</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/graphql/tracing/detailed_trace.rb', line 84</span>

<span class='kw'>def</span> <span class='id identifier rubyid_debug?'>debug?</span>
  <span class='ivar'>@debug</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_all_traces-instance_method">
  
    #<strong>delete_all_traces</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


106
107
108</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/graphql/tracing/detailed_trace.rb', line 106</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_all_traces'>delete_all_traces</span>
  <span class='ivar'>@storage</span><span class='period'>.</span><span class='id identifier rubyid_delete_all_traces'>delete_all_traces</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_trace-instance_method">
  
    #<strong>delete_trace</strong>(id)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


101
102
103</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/graphql/tracing/detailed_trace.rb', line 101</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_trace'>delete_trace</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='ivar'>@storage</span><span class='period'>.</span><span class='id identifier rubyid_delete_trace'>delete_trace</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_trace-instance_method">
  
    #<strong>find_trace</strong>(id)  &#x21d2; <tt><span class='object_link'><a href="DetailedTrace/StoredTrace.html" title="GraphQL::Tracing::DetailedTrace::StoredTrace (class)">StoredTrace</a></span></tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="DetailedTrace/StoredTrace.html" title="GraphQL::Tracing::DetailedTrace::StoredTrace (class)">StoredTrace</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


96
97
98</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/graphql/tracing/detailed_trace.rb', line 96</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_trace'>find_trace</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='ivar'>@storage</span><span class='period'>.</span><span class='id identifier rubyid_find_trace'>find_trace</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="inspect_object-instance_method">
  
    #<strong>inspect_object</strong>(object)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


110
111
112</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/graphql/tracing/detailed_trace.rb', line 110</span>

<span class='kw'>def</span> <span class='id identifier rubyid_inspect_object'>inspect_object</span><span class='lparen'>(</span><span class='id identifier rubyid_object'>object</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_inspect_object'>inspect_object</span><span class='lparen'>(</span><span class='id identifier rubyid_object'>object</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="save_trace-instance_method">
  
    #<strong>save_trace</strong>(operation_name, duration_ms, begin_ms, trace_data)  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns ID of saved trace.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>ID of saved trace</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


79
80
81</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/graphql/tracing/detailed_trace.rb', line 79</span>

<span class='kw'>def</span> <span class='id identifier rubyid_save_trace'>save_trace</span><span class='lparen'>(</span><span class='id identifier rubyid_operation_name'>operation_name</span><span class='comma'>,</span> <span class='id identifier rubyid_duration_ms'>duration_ms</span><span class='comma'>,</span> <span class='id identifier rubyid_begin_ms'>begin_ms</span><span class='comma'>,</span> <span class='id identifier rubyid_trace_data'>trace_data</span><span class='rparen'>)</span>
  <span class='ivar'>@storage</span><span class='period'>.</span><span class='id identifier rubyid_save_trace'>save_trace</span><span class='lparen'>(</span><span class='id identifier rubyid_operation_name'>operation_name</span><span class='comma'>,</span> <span class='id identifier rubyid_duration_ms'>duration_ms</span><span class='comma'>,</span> <span class='id identifier rubyid_begin_ms'>begin_ms</span><span class='comma'>,</span> <span class='id identifier rubyid_trace_data'>trace_data</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="traces-instance_method">
  
    #<strong>traces</strong>(last: nil, before: nil)  &#x21d2; <tt>Enumerable&lt;<span class='object_link'><a href="DetailedTrace/StoredTrace.html" title="GraphQL::Tracing::DetailedTrace::StoredTrace (class)">StoredTrace</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>last</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>before</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Timestamp in milliseconds since epoch</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Enumerable&lt;<span class='object_link'><a href="DetailedTrace/StoredTrace.html" title="GraphQL::Tracing::DetailedTrace::StoredTrace (class)">StoredTrace</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


91
92
93</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/graphql/tracing/detailed_trace.rb', line 91</span>

<span class='kw'>def</span> <span class='id identifier rubyid_traces'>traces</span><span class='lparen'>(</span><span class='label'>last:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>before:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='ivar'>@storage</span><span class='period'>.</span><span class='id identifier rubyid_traces'>traces</span><span class='lparen'>(</span><span class='label'>last:</span> <span class='id identifier rubyid_last'>last</span><span class='comma'>,</span> <span class='label'>before:</span> <span class='id identifier rubyid_before'>before</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Wed Jan 21 12:34:30 2026 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.38 (ruby-3.2.10).
</div>

    </div>
  </body>
</html>