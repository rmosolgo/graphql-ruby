<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
      <title>GraphQL Enterprise - Changesets - API Versioning for GraphQL-Ruby</title>
    
    <link href="https://fonts.googleapis.com/css?family=Rubik:300,400,700" rel="stylesheet" />
    <link rel="stylesheet" href="/css/main.css">
    <link rel="icon" href="/graphql-ruby-icon.png">
  </head>
  <body>
    <div class="header">
      <div class="header-container">
        <div class="nav">
          <a href="/" class="img-link">
            <img src="/graphql-ruby.png" alt="GraphQL Ruby Logo" />
          </a>
          <a href="/getting_started">Get Started</a>
          <a href="/guides">Guides</a>
          <a href="/api-doc/2.0.22/">API</a>
          <a href="https://tinyletter.com/graphql-ruby">Newsletter</a>
          <a href="https://github.com/rmosolgo/graphql-ruby">Source Code</a>
          <a href="https://graphql.pro">Upgrade to Pro</a>
          <input
            class="search-input"
            onkeyup="GraphQLRubySearch.run(this)"
            type="text"
            placeholder="Search the docs..."
          />
        </div>
      </div>
      <div class="search-results-container">
        <div id="search-results">
        </div>
      </div>
    </div>
    <div class="container">
      <ul class="breadcrumb">
  <li><a href="/guides">Guides</a></li>
  <li>
    <select class="jump-to-select" onchange="navigateToSelected(this)">
      
        <option  data-target="/schema/definition.html">Schema</option>
      
        <option  data-target="/queries/executing_queries.html">Queries</option>
      
        <option  data-target="/type_definitions/objects.html">Type Definitions</option>
      
        <option  data-target="/authorization/overview.html">Authorization</option>
      
        <option  data-target="/fields/introduction.html">Fields</option>
      
        <option  data-target="/mutations/mutation_root.html">Mutations</option>
      
        <option  data-target="/errors/overview.html">Errors</option>
      
        <option  data-target="/pagination/overview.html">Pagination</option>
      
        <option  data-target="/relay/range_add.html">Relay</option>
      
        <option  data-target="/dataloader/overview.html">Dataloader</option>
      
        <option  data-target="/subscriptions/overview.html">Subscriptions</option>
      
        <option  data-target="/pro/home.html">GraphQL Pro</option>
      
        <option  data-target="/operation_store/overview.html">GraphQL Pro - OperationStore</option>
      
        <option  data-target="/defer/overview.html">GraphQL Pro - Defer</option>
      
        <option  data-target="/limiters/overview.html">GraphQL Enterprise - Rate Limiters</option>
      
        <option  data-target="/object_cache/overview.html">GraphQL Enterprise - Object Cache</option>
      
        <option  selected data-target="/changesets/overview.html">GraphQL Enterprise - Changesets</option>
      
        <option  data-target="/javascript_client/overview.html">JavaScript Client</option>
      
        <option  data-target="/language_tools/visitor.html">Language Tools</option>
      
        <option  data-target="/testing/overview.html">Testing</option>
      
        <option  data-target="/development.html">Other</option>
      
    </select>
  </li>
  <li>
    <select class="jump-to-select" onchange="navigateToSelected(this)">
      
        <option  selected data-target="/changesets/overview.html">API Versioning for GraphQL-Ruby</option>
      
        <option  data-target="/changesets/installation.html">Installing Changesets</option>
      
        <option  data-target="/changesets/definition.html">Defining Changesets</option>
      
        <option  data-target="/changesets/releases.html">Releasing Changesets</option>
      
    </select>
  </li>
</ul>



  <div class="enterprise-header">
    <p>
      <strong>üåü Enterprise Feature üåü</strong>
      <span style="font-style: italic;">
        This feature is bundled with <a href="https://graphql.pro/enterprise">GraphQL-Enterprise</a>.
      </span>
    </p>
  </div>

<h1 class="guide-header">API Versioning for GraphQL-Ruby</h1>
<div class="guide-table-of-contents"><div class="table-of-contents">
  <h3 class="contents-header">Contents</h3>
  <ol class='contents-list'><li class='contents-entry'><a href='#why-changesets'>Why Changesets?
</a></li><li class='contents-entry'><a href='#getting-started'>Getting Started
</a></li></ol>
</div>
</div>
<div class="guide-container">
  <p>Out-of-the-box, GraphQL is <a href="https://graphql.org/learn/best-practices/#versioning">versionless by design</a>. GraphQL‚Äôs openness to extension paves the way for continuously expanding and improving an API. You can <em>always</em> add new fields, new arguments, and new types to implement new features and customize existing behavior.</p>

<p>However, sometimes a business case may call for a different versioning scheme. <a href="https://graphql.pro/enterprise">GraphQL-Enterprise</a>‚Äôs ‚ÄúChangesets‚Äù enable schemas to release <em>any</em> change ‚Äì even breaking changes ‚Äì to clients, depending on what version of the schema they‚Äôre using. With Changesets, you can redefine existing fields, define new types using old names, add or remove enum values ‚Äì anything, really ‚Äì while maintaining compatibility for existing clients.</p>

<h2 id="why-changesets">Why Changesets?</h2>

<p>Changesets are a <em>complementary</em> evolution technique to continuous additions. In general, additive changes (new fields, new arguments, new types) are best added right to the existing schema. But if you need to <em>remove</em> something from the schema or redefine existing parts of the schema in non-backwards-compatible ways, Changesets provide a handy way of doing so.</p>

<p>For example, if you add a values to an Enum, you can just add it to the existing schema:</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  class Types::RecipeTag &lt; Types::BaseEnum
    value "LOW_FAT"
    value "LOW_CARB"
<span class="gi">+   value "VEGAN"
+   value "KETO"
+   value "GRAPEFRUIT_DIET"
</span>  end
</code></pre></div></div>

<p>However, if you want to change the schema in ways that would <em>break</em> previous queries, you can do that with a Changeset:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Types::RecipeTag</span> <span class="o">&lt;</span> <span class="no">Types</span><span class="o">::</span><span class="no">BaseEnum</span>
  <span class="c1"># Turns out this makes you sick:</span>
  <span class="n">value</span> <span class="s2">"GRAPEFRUIT_DIET"</span><span class="p">,</span> <span class="ss">removed_in: </span><span class="no">Changesets</span><span class="o">::</span><span class="no">RemoveLegacyDiets</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Then, only clients requesting API versions <em>before</em>  this changeset would be able to use <code class="language-plaintext highlighter-rouge">GRAPEFRUIT_DIET</code>; clients requesting newer versions could not send it as input and would not receive it in responses.</p>

<p>(Changesets <em>also</em> support additive changes, if you prefer to make them that way.)</p>

<h2 id="getting-started">Getting Started</h2>

<p>To start using Changesets, read on:</p>

<ul>
  <li><a href="/changesets/installation">Installing Changesets</a></li>
  <li><a href="/changesets/definition">Writing Changesets</a></li>
  <li><a href="/changesets/releases">Releasing Changesets</a></li>
</ul>

</div>
<p class="guide-footer">
  Suggestion, improvement, or correction?
  <a href="https://github.com/rmosolgo/graphql-ruby/edit/master/guides/changesets/overview.md">Edit this file</a> or
  <a href="https://github.com/rmosolgo/graphql-ruby/issues/new?title=Guide: API Versioning for GraphQL-Ruby">report an issue</a>.
</p>
<script>
  // Find headers with IDs and wrap their text in `<a href=></a>`
  // That way people can easily copy the link.
  var headers = document.querySelectorAll("h1, h2, h3, h4, h5");
  var header, idText, headerLink;
  for (var i = 0; i < headers.length; i++) {
    header = headers[i];
    idText = header.id;
    if (idText) {
      headerLink = document.createElement("a");
      headerLink.href = "#" + idText;
      headerLink.textContent = header.textContent;
      header.textContent = "";
      header.appendChild(headerLink);
    }
  }
  function navigateToSelected(selectElement) {
    var nextPage = selectElement.selectedOptions[0].dataset["target"]
    document.location = nextPage
  }
</script>

    </div>
    <script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearchLite.min.js"></script>
    <script src="/js/search.js"></script>
  </body>
</html>
